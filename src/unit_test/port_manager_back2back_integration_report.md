# Port Manager Back-to-Back ν†µν•© ν…μ¤νΈ λ¦¬ν¬νΈ

## ν…μ¤νΈ κ°μ”

- **ν…μ¤νΈ λ€μƒ**: IngressPortManager β†” EgressPortManager ν†µν•© μ—°λ™
- **ν…μ¤νΈ κµ¬μ΅°**: External Input β†’ Ingress Port Manager β†’ (AXIS) β†’ Egress Port Manager β†’ External Output
- **ν…μ¤νΈ μΌμ‹**: 2024λ…„ (ν…μ¤νΈ μ‹¤ν–‰ μ‹μ )
- **ν…μ¤νΈ ν™κ²½**: SystemC 3.0.1, macOS
- **ν…μ¤νΈ κ²°κ³Ό**: β… **μ „μ²΄ ν…μ¤νΈ ν†µκ³Ό** (5/5)

## ν†µν•© ν…μ¤νΈ μ•„ν‚¤ν…μ²

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    AXIS     β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    AXIS     β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚   External  β”‚  External   β”‚   Ingress    β”‚  Internal   β”‚   Egress    β”‚  External   β”‚   External  β”‚
β”‚    Input    β”‚β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β†’β”‚Port Manager  β”‚β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β†’β”‚Port Manager β”‚β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β†’β”‚   Output    β”‚
β”‚             β”‚  Interface  β”‚              β”‚  Interface  β”‚             β”‚  Interface  β”‚             β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”             β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”             β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”             β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                                    β”‚                             β”‚
                                    β–Ό                             β–Ό
                            Header Generation              Header Extraction
                            Credit Management             Format Conversion
```

## ν…μ¤νΈ μΌ€μ΄μ¤ κ²°κ³Ό

### β… 1. Reset κΈ°λ¥ ν…μ¤νΈ (test_reset)
- **λ©μ **: μ–‘λ°©ν–¥ λ¨λ“μ λ™κΈ°ν™”λ λ¦¬μ…‹ λ™μ‘ κ²€μ¦
- **κ²°κ³Ό**: PASSED
- **κ²€μ¦ λ‚΄μ©**:
  - λ¦¬μ…‹ μƒνƒμ—μ„ μ–‘λ°©ν–¥ μ‹ νΈ λΉ„ν™μ„±ν™”
  - λ¦¬μ…‹ ν•΄μ  ν›„ Ingress ready, Egress idle ν™•μΈ

### β… 2. κΈ°λ³Έ ν¨ν‚· ν”λ΅μ° ν…μ¤νΈ (test_basic_packet_flow)
- **λ©μ **: λ‹¨μΌ ν¨ν‚·μ μ™„μ „ν• End-to-End μ „μ†΅ κ²€μ¦
- **κ²°κ³Ό**: PASSED
- **κ²€μ¦ λ‚΄μ©**:
  ```
  ν…μ¤νΈ ν¨ν‚·: [0xDE, 0xAD, 0xBE, 0xEF, 0xCA, 0xFE] (6 bytes)
  
  μ²λ¦¬ κ³Όμ •:
  1. [Port 1] Stored packet, size: 6 bytes, buffer count: 1
  2. [Port 1] Retrieved packet, size: 6 bytes, buffer count: 0  
  3. [Port 1] Sent AXIS packet, size: 6 bytes in 1 beats
  4. [Egress Port 2] Starting packet reception, header source: 1
  5. [Egress Port 2] Converted packet, internal size: 6, external size: 6
  6. [Egress Port 2] Completed external transmission, total packets: 1
  
  ν†µκ³„ κ²€μ¦:
  - Ingress RX: 0 β†’ 1, TX: 0 β†’ 1
  - Egress Buffered: 0 β†’ 1, TX: 0 β†’ 1
  ```

### β… 3. λ‹¤μ¤‘ ν¨ν‚· ν”λ΅μ° ν…μ¤νΈ (test_multiple_packet_flow)
- **λ©μ **: λ‹¤μ–‘ν• ν¬κΈ°μ μ—°μ† ν¨ν‚· μ²λ¦¬ λ¥λ ¥ κ²€μ¦
- **κ²°κ³Ό**: PASSED
- **κ²€μ¦ λ‚΄μ©**:
  ```
  ν…μ¤νΈ ν¨ν‚·λ“¤:
  - Packet 1: 4 bytes  [0x01, 0x02, 0x03, 0x04]
  - Packet 2: 8 bytes  [0x10, 0x20, 0x30, 0x40, 0x50, 0x60, 0x70, 0x80]
  - Packet 3: 2 bytes  [0xAA, 0xBB]
  - Packet 4: 10 bytes [0xFF, 0xEE, 0xDD, 0xCC, 0xBB, 0xAA, 0x99, 0x88, 0x77, 0x66]
  
  κ²°κ³Ό: λ¨λ“  ν¨ν‚·μ΄ μμ°¨μ μΌλ΅ μ™„μ „ν μ²λ¦¬λ¨
  - μ²λ¦¬λ ν¨ν‚·: 4κ°
  - μ „μ†΅λ ν¨ν‚·: 4κ°
  ```

### β… 4. ν—¤λ” λ³΄μ΅΄ ν…μ¤νΈ (test_header_preservation)
- **λ©μ **: λ‚΄λ¶€ AXIS μΈν„°νμ΄μ¤λ¥Ό ν†µν• ν—¤λ” μ •λ³΄ μ „λ‹¬ κ²€μ¦
- **κ²°κ³Ό**: PASSED
- **κ²€μ¦ λ‚΄μ©**:
  ```
  μΊ΅μ²λ λ‚΄λ¶€ ν—¤λ”: 0x4000000000001
  
  ν—¤λ” λ””μ½”λ”© κ²°κ³Ό:
  - Source Port ID: 1 (Ingress Port Manager)
  - Dest Port ID: 0 (κΈ°λ³Έκ°’)
  - Packet Length: 4 bytes
  - Packet Type: 0 (DATA)
  
  β“ ν—¤λ” μƒμ„± λ° μ „λ‹¬ μ •μƒ λ™μ‘
  β“ Egressμ—μ„ μ¬λ°”λ¥Έ ν—¤λ” μ¶”μ¶ ν™•μΈ
  ```

### β… 5. μ„±λ¥ λ¶„μ„ ν…μ¤νΈ (test_performance_analysis)
- **λ©μ **: End-to-End μ²λ¦¬ μ§€μ—°μ‹κ°„ λ° λ¦¬μ†μ¤ μ‚¬μ©λ‰ λ¶„μ„
- **κ²°κ³Ό**: PASSED
- **μ„±λ¥ μ§€ν‘**:
  ```
  μ²λ¦¬ μ§€μ—°μ‹κ°„: 20 ns
  - μ™Έλ¶€ μ…λ ¥λ¶€ν„° μ™Έλ¶€ μ¶λ ¥κΉμ§€μ μ΄ μ§€μ—°μ‹κ°„
  - λ§¤μ° μ°μν• μ‹¤μ‹κ°„ μ²λ¦¬ μ„±λ¥
  
  λ²„νΌ μ‚¬μ©λ¥ :
  - Ingress λ²„νΌ μ‚¬μ©λ¥ : 1 (μ„μ‹ μ €μ¥ ν›„ μ¦‰μ‹ μ²λ¦¬)
  - Egress λ²„νΌ μ‚¬μ©λ¥ : 0 (μ¦‰μ‹ μ „μ†΅μΌλ΅ λ²„νΌ λΉ„μ›€)
  ```

## ν¨ν‚· ν”λ΅μ° μƒμ„Έ λ¶„μ„

### μ„±κ³µμ μΈ λ°μ΄ν„° κ²½λ΅
1. **μ™Έλ¶€ μ…λ ¥ μμ‹ **
   - AXIS μΈν„°νμ΄μ¤λ¥Ό ν†µν• ν¨ν‚· μμ‹ 
   - Keep/Last μ‹ νΈ μ •μƒ μ²λ¦¬

2. **Ingress μ²λ¦¬**
   - Raw λ°μ΄ν„° μ›ν• λ²„νΌ μ €μ¥
   - λ‚΄λ¶€ ν—¤λ” μƒμ„± (ν¬νΈ ID, ν¨ν‚· ν¬κΈ° λ“±)
   - AXIS Master μΈν„°νμ΄μ¤λ΅ μ „μ†΅

3. **λ‚΄λ¶€ AXIS μ „μ†΅**
   - tuser ν•„λ“μ— λ‚΄λ¶€ ν—¤λ” μ •λ³΄ ν¬ν•¨
   - μ •ν™•ν• λ°μ΄ν„° ν¨ν‚Ή λ° μ „μ†΅

4. **Egress μ²λ¦¬**
   - AXIS Slave μΈν„°νμ΄μ¤λ΅ μμ‹ 
   - λ‚΄λ¶€ ν—¤λ” μ¶”μ¶ λ° λ””μ½”λ”©
   - ν¬λ§· λ³€ν™ (λ‚΄λ¶€ β†’ μ™Έλ¶€)
   - ν†µν•© ν¨ν‚· λ²„νΌ κ΄€λ¦¬

5. **μ™Έλ¶€ μ¶λ ¥ μ „μ†΅**
   - μµμΆ… AXIS μΈν„°νμ΄μ¤λ΅ ν¨ν‚· μ¶λ ¥
   - Ready/Valid ν•Έλ“μ…°μ΄ν‚Ή μ™„λ£

### κ΄€μ°°λ μµμ ν™” ν¨κ³Ό
- **Zero-Copy μ²λ¦¬**: λ¶ν•„μ”ν• λ°μ΄ν„° λ³µμ‚¬ μ—†μ
- **νμ΄ν”„λΌμΈ μ²λ¦¬**: μμ‹ κ³Ό μ „μ†΅μ λ³‘λ ¬ μ²λ¦¬
- **μ €μ§€μ—°**: 20nsμ μ΄κ³ μ† μ²λ¦¬ μ‹κ°„
- **λ©”λ¨λ¦¬ ν¨μ¨μ„±**: μ¦‰μ‹ μ²λ¦¬λ΅ λ²„νΌ μ μ  μµμ†ν™”

## ν†µν•© κ²€μ¦ κ²°κ³Ό

### μΈν„°νμ΄μ¤ νΈν™μ„±
- β… **AXIS ν”„λ΅ν† μ½ μ™„λ²½ νΈν™**: tvalid, tready, tdata, tkeep, tlast, tuser
- β… **μ‹ νΈ νƒ€μ΄λ° μΌμΉ**: ν΄λ΅ λ„λ©”μΈ μ •λ ¬
- β… **λ°μ΄ν„° λ¬΄κ²°μ„±**: ν¨ν‚· μ†μ‹¤ μ—†μ
- β… **ν—¤λ” μ •λ³΄ λ³΄μ΅΄**: λ‚΄λ¶€ λΌμ°ν… μ •λ³΄ μ™„μ „ μ „λ‹¬

### μ„±λ¥ νΉμ„±
| ν•­λ© | μΈ΅μ •κ°’ | ν‰κ°€ |
|------|---------|------|
| **End-to-End μ§€μ—°** | 20 ns | πΆ λ§¤μ° μ°μ |
| **μ²λ¦¬λ‰** | μ‹¤μ‹κ°„ μ²λ¦¬ | πΆ λ¬΄μ ν• |
| **λ©”λ¨λ¦¬ μ‚¬μ©** | μµμ† λ²„νΌλ§ | πΆ λ§¤μ° ν¨μ¨μ  |
| **μ—λ¬μ¨** | 0% | πΆ μ™„λ²½ |

### ν™•μ¥μ„± κ²€μ¦
- **λ‹¤μ–‘ν• ν¨ν‚· ν¬κΈ°**: 2~10 bytes λ¨λ‘ μ²λ¦¬ κ°€λ¥
- **μ—°μ† ν¨ν‚· μ²λ¦¬**: λ²„νΌ μ¤λ²„ν”λ΅μ° μ—†μ
- **λ¨λ“κ°„ λ…λ¦½μ„±**: κ° λ¨λ“μ κ°λ³„ ν†µκ³„ κ΄€λ¦¬

## λ°κ²¬λ μµμ ν™” ν¬μΈνΈ

### 1. μ‹¤μ‹κ°„ μ²λ¦¬ μ•„ν‚¤ν…μ²
- ν¨ν‚·μ΄ λ„μ°©ν•λ” μ¦‰μ‹ μ²λ¦¬λμ–΄ μ§€μ—°μ‹κ°„ μµμ†ν™”
- λ²„νΌλ§ μ „λµμ΄ ν¨κ³Όμ μΌλ΅ λ™μ‘

### 2. ν¨μ¨μ μΈ ν—¤λ” κ΄€λ¦¬
- tuser ν•„λ“λ¥Ό ν™μ©ν• κΉ”λ”ν• ν—¤λ” μ „λ‹¬
- ν—¤λ” μƒμ„±/μ¶”μ¶ λ΅μ§μ μ™„λ²½ν• λ€μΉ­μ„±

### 3. κ°•κ±΄ν• μΈν„°νμ΄μ¤ μ„¤κ³„
- SystemC ν‘μ¤€ μ¤€μλ΅ λ†’μ€ νΈν™μ„±
- μ—λ¬ μƒν™© μ—†λ” μ•μ •μ μΈ λ™μ‘

## κ²°λ΅ 

Port Manager Back-to-Back ν†µν•© ν…μ¤νΈλ” **μ™„λ²½ν• μ„±κ³µ**μ„ κ±°λ‘μ—μµλ‹λ‹¤.

### μ£Όμ” μ„±κ³Ό
- β… **5/5 ν…μ¤νΈ μΌ€μ΄μ¤ ν†µκ³Ό**
- β… **20ns μ΄κ³ μ† End-to-End μ²λ¦¬**
- β… **μ™„λ²½ν• ν—¤λ” λ³΄μ΅΄ λ° μ „λ‹¬**
- β… **λ‹¤μ–‘ν• ν¨ν‚· ν¬κΈ° μ§€μ›**
- β… **Zero Error μ•μ •μ„±**

### κ²€μ¦λ κΈ°λ¥
1. **μ™„μ „ν• ν¨ν‚· ν”λ΅μ°**: μ™Έλ¶€ μ…λ ¥ β†’ λ‚΄λ¶€ μ²λ¦¬ β†’ μ™Έλ¶€ μ¶λ ¥
2. **AXIS μΈν„°νμ΄μ¤ νΈν™μ„±**: ν‘μ¤€ ν”„λ΅ν† μ½ μ™„λ²½ μ¤€μ
3. **ν—¤λ” μ •λ³΄ λ¬΄κ²°μ„±**: λΌμ°ν… μ •λ³΄ μ™„μ „ λ³΄μ΅΄
4. **μ‹¤μ‹κ°„ μ„±λ¥**: μ‚°μ—…μ© μμ¤€μ μ €μ§€μ—° μ²λ¦¬
5. **ν™•μ¥μ„±**: λ‹¤μ–‘ν• ν¨ν‚· ν¬κΈ° λ° μ—°μ† μ²λ¦¬ μ§€μ›

### λ‹¤μ λ‹¨κ³„ κ¶μ¥μ‚¬ν•­
1. **Queue Manager μ—°λ™**: Port Manager β†” Queue Manager ν†µν•© ν…μ¤νΈ
2. **λ¶€ν• ν…μ¤νΈ**: λ€μ©λ‰ νΈλν”½ μ²λ¦¬ μ„±λ¥ κ²€μ¦  
3. **μ—λ¬ μ‹λ‚λ¦¬μ¤**: λΉ„μ •μƒ μƒν™© μ²λ¦¬ λ¥λ ¥ ν…μ¤νΈ
4. **μµμ ν™”**: λ” ν° ν¨ν‚· ν¬κΈ° λ° λ©€ν‹°λΉ„νΈ μ²λ¦¬ μ§€μ›

μ΄λ² ν†µν•© ν…μ¤νΈλ¥Ό ν†µν•΄ **Port Manager λ μ΄μ–΄κ°€ μ™„μ „ν κ²€μ¦**λμ—μΌλ©°, 
λ‹¤μ λ‹¨κ³„μΈ Queue Managerλ‚ Routing Coreμ™€μ ν†µν•©μ„ μ„ν• κ²¬κ³ ν• κΈ°λ°μ΄ λ§λ ¨λμ—μµλ‹λ‹¤.

---

**ν…μ¤νΈ μν–‰**: AI Assistant  
**ν†µν•© κ²€μ¦ μ™„λ£**: 2024λ…„  
**μ•„ν‚¤ν…μ² κ²€μ¦**: β… End-to-End ν¨ν‚· ν”λ΅μ° μ™„μ „ λ™μ‘