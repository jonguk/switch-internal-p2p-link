# Switch Internal P2P Link - Project Development Rules

## 개발 순서 (Development Process)

1. **설계 단계**: Data structure와 operation sequence/flow를 충분히 상의
2. **구현 단계**: 각 모듈별로 코딩 시작
3. **필수 작업**: 각 파일마다 문서와 테스트 코드를 함께 작성

## 세션 관리 규칙 (Session Management Rules)

### 디렉토리 집중 작업 규칙
- **디렉토리 지정**: 사용자가 "이제부터 `<디렉토리 이름>`에서 일할거야"라고 지시하면 해당 디렉토리 안의 문서만 참조
- **컨텍스트 제한**: 지정된 디렉토리 외부의 파일은 자동으로 참조하지 않음
- **추가 참조**: 정보가 부족할 때만 사용자가 별도로 필요한 파일 위치를 알려주면 그때 해당 파일을 컨텍스트에 추가
- **목적**: 컨텍스트 창 관리, 집중도 향상, 작업 효율성 최적화

## 프로젝트 구조 (Project Structure)

```
프로젝트/
├── doc/              # 전역 문서
├── unit_test/        # 전역 테스트
│   └── build/        # 테스트 실행용 바이너리 및 실행중 생성 데이터
├── 기능A/            # 기능별 디렉토리
│   ├── common/       # 기능A 계층의 sharable code + doc + test
│   ├── 하위기능1/     # 계층 구조 가능
│   │   ├── common/   # 하위기능1 계층의 sharable code
│   │   └── ...
│   └── 하위기능2/
├── 기능B/
│   ├── common/
│   └── ...
└── common/           # 최상위 계층의 sharable code
```

### 디렉토리 규칙
- **기능별 분리**: 기능별로 디렉토리 분리
- **계층 구조**: 하위 기능을 위한 중첩 디렉토리 구조 가능
- **공통 코드**: 각 계층별로 `common/` 디렉토리에 sharable code, 문서, 테스트 저장
- **전역 저장소**: 
  - `doc/`: 전역 문서
  - `unit_test/`: 전역 테스트 코드
  - `unit_test/build/`: 테스트 실행용 바이너리 및 런타임 데이터

## 테스트 작성 규칙 (Testing Rules)

### 테스트 케이스 분류 (3그룹)
1. **Basic/Simple Test**: 기본적인 동작 검증
2. **Full Functional Test**: 완전한 기능 테스트  
3. **Full Error/Negative Test**: 에러 상황 및 경계값 테스트

### 테스트 작성 가이드라인
- **명명 규칙**: 테스트 케이스 이름에 힌트 포함 (이름만 봐도 테스트 내용 파악 가능)
- **저장 위치**: `unit_test/` 디렉토리 아래 저장
- **헤더파일 테스트**: 실체가 없는 코드(헤더파일 등)는 dummy로 간단한 기능 구현하여 테스트
- **문서화**: 테스트 목적과 상세 커버리지는 해당 파일의 문서에 기술
- **리포팅**: 테스트 완료 후 markdown 형식으로 리포트 파일 생성

## 문서 작성 규칙 (Documentation Rules)

- **위치**: 각 계층의 `doc/` 또는 `common/` 디렉토리
- **내용**: 테스트 목적, 상세 커버리지, 구현 세부사항 포함
- **형식**: 코드와 함께 작성하여 일관성 유지
- **우선순위**: 코드와 문서가 일치하지 않을 때는 코드에 있는 정보가 우선

## 하드웨어 모델링 규칙 (Hardware Modeling Rules)

- **모델링 언어**: SystemC를 이용하여 타겟 하드웨어 모델링
- **합성 목표**: 최종적으로 HLS(High-Level Synthesis)를 이용한 합성
- **코딩 제약**: 대부분의 HLS 툴에서 지원하는 라이브러리, 함수, syntax만 사용
- **호환성 우선**: HLS 도구 간 호환성을 고려한 코드 작성

## 문서 관리 규칙 (Document Management Rules)

- **자동 업데이트**: 개발 규칙과 관련된 이야기가 나오면 `project_rule.md` 파일을 자동으로 업데이트
- **실시간 반영**: 새로운 규칙 추가, 기존 규칙 변경, 규칙 삭제 시 즉시 문서에 반영
- **일관성 유지**: 모든 개발 규칙이 이 문서를 통해 중앙 관리되도록 함
- **보호 구역**: `<!-- DONT_TOUCH_START -->` ~ `<!-- DONT_TOUCH_END -->` HTML 주석으로 마킹된 구역은 수정 금지
  - 사용자가 직접 편집한 중요한 내용 보호
  - AI는 해당 구역 내용을 절대 변경하지 않음
  - **보호구역 수정 필요시**: 사용자에게 수정 계획을 설명하고 승인을 받은 후에만 수정
- **TODO Placeholder**: 나중에 채워넣어야 할 부분은 반드시 **TODO** 섹션으로 명시
  - 체크박스 형태로 작성: `- [ ] 항목 설명`
  - 구체적인 작업 내용과 범위 명시
  - 단계별 우선순위 표시 (🎯 다음 단계, 🔍 검증 단계 등)
  - 완료된 항목은 ✅ **완료된 작업** 섹션으로 이동
  - 문서 업데이트 시 TODO 완료된 항목은 해당 섹션에서 제거

## Git 관리 규칙 (Git Management Rules)

- **커밋 및 푸시 조건**: 다음 조건 중 하나를 만족할 때만 커밋 & 푸시
  - 사용자가 명시적으로 요청 ("커밋해줘", "푸시해줘" 등)
  - 커밋이 10개 이상 누적된 경우 자동 실행
- **자동 커밋 금지**: 일반적인 파일 수정 후 자동으로 커밋하지 않음
- **커밋 메시지**: 의미있는 커밋 메시지와 함께 변경사항 요약 포함

---

*이 문서는 프로젝트 개발 과정에서 지속적으로 업데이트됩니다.* 